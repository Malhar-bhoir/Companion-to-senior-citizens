{% extends 'base.html' %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="content-container p-4 p-md-5">
    <h1 class="mb-4">{{ title }}</h1>
    <p class="lead text-muted">Enter the complete professional details for this doctor.</p>
    
    <form method="POST" action="" enctype="multipart/form-data">
        {% csrf_token %}
        
        <!-- Display any form errors -->
        {% if form.errors %}
            <div class="alert alert-danger">
                Please correct the following errors:
                {% for field in form %}
                    {% for error in field.errors %}
                        <p>{{ field.label }}: {{ error }}</p>
                    {% endfor %}
                {% endfor %}
            </div>
        {% endif %}

        <div class="row g-3">
            <!-- Name and Photo -->
            <div class="col-md-8">
                <label for="{{ form.name.id_for_label }}" class="form-label">Doctor's Full Name *</label>
                {{ form.name }}
            </div>
            <div class="col-md-4">
                <label for="{{ form.profile_photo.id_for_label }}" class="form-label">Profile Photo (Optional)</label>
                {{ form.profile_photo }}
            </div>

            <!-- Specialty and Affiliation -->
            <div class="col-md-6">
                <label for="{{ form.specialty.id_for_label }}" class="form-label">Specialty *</label>
                {{ form.specialty }}
            </div>
            <div class="col-md-6">
                <label for="{{ form.hospital_affiliation.id_for_label }}" class="form-label">Hospital Affiliation (Link to Hospital)</label>
                {{ form.hospital_affiliation }}
            </div>

            <!-- Contact and Experience -->
            <div class="col-md-6">
                <label for="{{ form.contact_phone.id_for_label }}" class="form-label">Contact Phone Number *</label>
                {{ form.contact_phone }}
            </div>
            <div class="col-md-6">
                <label for="{{ form.years_experience.id_for_label }}" class="form-label">Years of Experience</label>
                {{ form.years_experience }}
            </div>

            <!-- Languages -->
            <div class="col-12">
                <label for="{{ form.languages_spoken.id_for_label }}" class="form-label">Languages Spoken</label>
                {{ form.languages_spoken }}
                <div class="form-text">Comma-separated list (e.g., Hindi, English, Marathi).</div>
            </div>
            
            <!-- Visiting Hours -->
            <div class="col-12">
                <label for="{{ form.visiting_hours.id_for_label }}" class="form-label">Visiting Hours</label>
                {{ form.visiting_hours }}
            </div>

        </div>
        
        <hr class="my-4">

        <!-- Buttons -->
        <div class="d-flex">
            <button type="submit" class="btn btn-primary btn-lg">Save Profile</button>
            <a href="{% url 'staff:manage_doctors' %}" class="btn btn-outline-secondary btn-lg ms-3">Cancel</a>
        </div>
    </form>
    
    <!-- Script to add Bootstrap classes -->
    <script>
        document.querySelectorAll('input[type="text"], input[type="email"], select, textarea, input[type="number"]').forEach(function(field) {
            field.classList.add('form-control');
        });
        document.querySelectorAll('select').forEach(function(field) {
            field.classList.remove('form-control');
            field.classList.add('form-select');
        });
    </script>
</div>
{% endblock %}